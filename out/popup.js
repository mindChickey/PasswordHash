var a="ABCDEFGHIJKLMNOPQRSTUVWXYZ",f="abcdefghijklmnopqrstuvwxyz",T="0123456789";async function p(e,t,n,u){let d=new TextEncoder,l=d.encode(e),m=d.encode(t),i=await crypto.subtle.importKey("raw",l,{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),g={name:"PBKDF2",salt:m,iterations:n,hash:"SHA-256"},I=await crypto.subtle.deriveBits(g,i,u);return new Uint8Array(I)}function y(e,t){let n=[],u=0;for(let d of t){let l=e.slice(u,u+d);n.push(l),u+=d}return n}function o(e,t){return Array.from(e).map((d)=>t[d%t.length]).join("")}function V(e,t){let n=t.hasUpper?o(e[0],a):"",u=t.hasLower?o(e[1],f):"",d=t.hasNumber?o(e[2],T):"";return n+u+d}function X(e,t){let n=t.hasUpper?a:"",u=t.hasLower?f:"",d=t.hasNumber?T:"",l=n+u+d;return o(e,l)}async function B(e,t,n){let u=await p(e,"PasswordHash",1e6,256),d=y(u,[1,1,1,n]),l=V(d,t),m=d[3].slice(0,n-l.length),i=X(m,t);return l+i}async function M(e,t){let n=await p(e,"PasswordHash",1e6,256),u=Math.ceil(t/3),d=t-2*u,l=y(n,[u,u,d]),m=a.replace(/[OI]/g,""),i=f.replace(/[ol]/g,""),g=T.replace(/[01]/g,""),I=o(l[0],m),J=o(l[1],i),Q=o(l[2],g);return I+J+Q}var w=document.getElementById("stableModeRadio"),h=document.getElementById("handModeRadio"),D=document.getElementById("digitModeRadio"),E=document.getElementById("lenInput"),b=document.getElementById("showCheckBox"),H=document.getElementById("autoCopyCheckBox");function O(){if(D.checked)return{hasUpper:!1,hasLower:!1,hasNumber:!0};else return{hasUpper:!0,hasLower:!0,hasNumber:!0}}function Y(){if(w.checked)return 0;else if(h.checked)return 1;else return 2}function v(){return{mode:Y(),show:b.checked,autoCopy:H.checked,len:parseInt(E.value,10)}}function L(e){b.onchange=e}function k(e,t,n,u){e.onchange=()=>{if(e.checked)H.checked=t,b.checked=n,E.value=u.toString()}}function j(){k(h,!1,!0,10),k(D,!1,!0,6),k(w,!0,!1,15)}var c=document.getElementById("passwordInput"),Z=document.getElementById("enterButton"),q=document.getElementById("phiddenDiv"),F=document.getElementById("tipsDiv");function x(e){return Array.from(e).map((t)=>"*").join("")}function z(e,t,n){if(e)q.textContent=t+`
`+n;else{let u=n[0]+x(n.slice(1));q.textContent=x(t)+`
`+u}}async function $(e,t){let n=e.len;if(e.mode===1)return await M(t,n);else{let u=O();return await B(t,u,n)}}async function G(e){let t=v(),n=await $(t,e),u=t.show;if(z(u,e,n),L(()=>{z(u,e,n)}),t.autoCopy)await window.navigator.clipboard.writeText(n),F.textContent="write to clipboard success"}function K(e){if(e.key==="Enter")G(c.value);else F.textContent=""}function W(){j(),Z.onclick=()=>G(c.value),c.onkeyup=K,c.focus()}W();
